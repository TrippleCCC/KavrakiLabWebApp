{% extends 'base.html' %}

{% block results %}
<h5>Results</h5>
<p>Retrived {{ num_results }} results in {{ '%2.4f' % query_time }} seconds</p>
{% with flash_message = get_flashed_messages(category_filter=["warning"]) %}
	{% if flash_message %}
        {% for msg in flash_message %}
            <div class="alert alert-warning" role="alert">
                ⚠️  {{ msg }} 
            </div>
        {% endfor %}
	{% endif %}
{% endwith %}
<table class="table table-striped">
	<thread>
		<tr>
			<th scope="col">Allele</th>
			<th scope="col">Peptide</th>
			<th scope="col">Binder</th>
			<th scope="col">Filepath</th>
			<th scope="col">Download</th>
            <th scope="col">
                <div class="container d-flex justify-content-center">
                    <button id="download-selected" class="btn btn-link">Download Selected</button>
                </div>
                <div class="container d-flex justify-content-center">
                    <input type="checkbox" id="select-all" />
                </div>
            </th>
		</tr>
	</thread>
	<tbody>
	{% for row in results %}
	<tr>
		<th scope="row">{{ row["allele"] }}</th>
		<td>{{ row["peptide"] }}</td>
		<td>{{ "binder" if row["binder"]==1 else "non-binder" }}</td>
		<td>{{ row["filepath"] }}</td>
		<td><a href='{{ url_for("download.download", path=row["filepath"]) }}' class="btn btn-primary">Download</button></td>
        <td>
            <div class="container d-flex h-100 justify-content-center">
                <input name="selection-item" type="checkbox" class="selection-item" value="{{ row["id"] }}"/>
            </div>
        </td>
	</tr>
	{% endfor %}
	</tbody>
</table>
<script src='{{ url_for("static", filename="js/result_page.js") }}'></script>
{% endblock %}
